# üìö Supabase - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –°–æ–∑–¥–∞–Ω `utils/supabase-config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2. ‚úÖ –°–æ–∑–¥–∞–Ω `utils/trickle-api-supabase.js` - API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Supabase
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ HTML —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Supabase
4. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ localStorage, –µ—Å–ª–∏ Supabase –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:

1. **–ï—Å–ª–∏ Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω** ‚Üí –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–ï—Å–ª–∏ Supabase –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** ‚Üí –¥–∞–Ω–Ω—ã–µ –≤ localStorage (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Supabase:

- ‚úÖ –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –ª—é–±–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ –ù–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª–∏ Supabase
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (–¥–æ 500MB)
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

```
utils/
  ‚îú‚îÄ‚îÄ supabase-config.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (URL –∏ –∫–ª—é—á–∏)
  ‚îú‚îÄ‚îÄ trickle-api-supabase.js     # API —Å Supabase
  ‚îî‚îÄ‚îÄ trickle-api.js              # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (localStorage)

HTML —Ñ–∞–π–ª—ã:
  ‚îú‚îÄ‚îÄ register.html               # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Supabase
  ‚îú‚îÄ‚îÄ admin.html                  # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Supabase
  ‚îú‚îÄ‚îÄ login.html                  # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Supabase
  ‚îî‚îÄ‚îÄ ...
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Supabase
–°–º. `QUICK_SUPABASE_SETUP.md` –∏–ª–∏ `SUPABASE_SETUP.md`

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
–û—Ç–∫—Ä–æ–π—Ç–µ `utils/supabase-config.js` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ –∫–ª—é—á–∏

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É
–°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `SUPABASE_SETUP.md`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
console.log('Supabase –¥–æ—Å—Ç—É–ø–µ–Ω:', window.SUPABASE_CONFIG?.isAvailable());
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏
trickleListObjects('user_registration', 10).then(r => {
  console.log('–ó–∞—è–≤–∫–∏:', r.items);
});
```

### –í –ø–∞–Ω–µ–ª–∏ Supabase:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Table Editor**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `user_registration`
3. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

### –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–¥–ª—è –¥–µ–º–æ):
- RLS –æ—Ç–∫–ª—é—á–µ–Ω
- –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (anon key) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –í–∫–ª—é—á–∏—Ç–µ RLS
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:

```sql
CREATE TABLE user_registration (
  id BIGSERIAL PRIMARY KEY,
  telegram_id TEXT,
  username TEXT NOT NULL,
  password TEXT NOT NULL,
  first_name TEXT NOT NULL,
  last_name TEXT NOT NULL,
  requested_role TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending',
  approved_role TEXT,
  registration_date TIMESTAMPTZ DEFAULT NOW(),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

### "Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç Supabase –∑–∞–≥—Ä—É–∂–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏ –∫–ª—é—á –≤ `supabase-config.js`

### "relation does not exist"
- –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã

### "new row violates row-level security"
- –í–∫–ª—é—á–∏—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ RLS

### –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã

---

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- **Supabase Dashboard**: https://app.supabase.com
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://supabase.com/docs
- **JavaScript Client**: https://supabase.com/docs/reference/javascript

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `QUICK_SUPABASE_SETUP.md`**

